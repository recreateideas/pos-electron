(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{221:function(e,n,t){},250:function(e,n){e.exports={errorHandler:function(e){return{status:e.response?e.response.status:e.status,data:e.response?e.response.data:e.data}},responseHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{status:e.status,data:e.data}}}},268:function(e,n){},270:function(e,n){},280:function(e,n){},282:function(e,n){},307:function(e,n){},309:function(e,n){},310:function(e,n){},315:function(e,n){},317:function(e,n){},323:function(e,n){},325:function(e,n){},344:function(e,n){},356:function(e,n){},359:function(e,n){},385:function(e,n){},479:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"getProducts",(function(){return N})),t.d(r,"checkout",(function(){return T}));var a={};t.r(a),t.d(a,"products",(function(){return H})),t.d(a,"isCheckoutPending",(function(){return D}));var c={};t.r(c),t.d(c,"data",(function(){return a}));var i={};t.r(i),t.d(i,"data",(function(){return r}));t(220),t(221);var o,s,d=t(0),u=t.n(d),l=t(80),b=t.n(l),j=t(50),p=t(68),O=t(213),h=t(18),f={data:{}},x=t(19),v=t.n(x),m=t(31),g=t(214),C=t.n(g),E=t(67),y=t.n(E),S=function(){var e=Object(m.a)(v.a.mark((function e(n){var t,r,a,c,i,o,s,d,u,l,b,j;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.url,r=n.data,a=n.method,c=void 0===a?y.a.method:a,i=n.headers,o=void 0===i?y.a.headers:i,s=n.errorHandler,d=void 0===s?y.a.errorHandler:s,u=n.responseHandler,l=void 0===u?y.a.responseHandler:u,b={method:c,headers:o,data:r},e.prev=2,console.log(b),e.next=6,C()(t,b);case 6:return j=e.sent,e.abrupt("return",l(j));case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",d(e.t0));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}(),_={SET_USER:"SET_USER",GET_PRODUCTS_PENDING:"GET_PRODUCTS_PENDING",GET_PRODUCTS_ERROR:"GET_PRODUCTS_ERROR",GET_PRODUCTS_SUCCESS:"GET_PRODUCTS_SUCCESS",CHECKOUT_PENDING:"CHECKOUT_PENDING",CHECKOUT_ERROR:"CHECKOUT_ERROR",CHECKOUT_SUCCESS:"CHECKOUT_SUCCESS"},N=function(){return function(){var e=Object(m.a)(v.a.mark((function e(n,t){var r,a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t(),a=r.data.products,n({type:_.GET_PRODUCTS_PENDING}),c={url:"http://localhost:2999/products",errorHandler:function(e){n({type:_.GET_PRODUCTS_ERROR,data:{message:e.message}})},responseHandler:function(e){var t;n({type:_.GET_PRODUCTS_SUCCESS,data:{products:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.products}})}},a){e.next=6;break}return e.next=6,S(c);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},T=function(e){return function(){var n=Object(m.a)(v.a.mark((function n(t){var r;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:_.CHECKOUT_PENDING}),r={url:"http://localhost:2999/billing/checkout",method:"POST",data:{orderStatus:e},errorHandler:function(e){t({type:_.CHECKOUT_ERROR,data:{message:e.message}})},responseHandler:function(e){var n;t({type:_.CHECKOUT_SUCCESS,data:{products:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.products}})}},n.next=4,S(r);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},w={data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.data,n=arguments.length>1?arguments[1]:void 0,t=n.type,r=n.data;switch(t){case _.GET_PRODUCTS_SUCCESS:return Object(h.a)(Object(h.a)({},e),{},{products:r.products});case _.CHECKOUT_PENDING:return Object(h.a)(Object(h.a)({},e),{},{isCheckoutPending:!0});case _.CHECKOUT_ERROR:return Object(h.a)(Object(h.a)({},e),{},{isCheckoutCompleted:!0,isCheckoutPending:!1});case _.CHECKOUT_SUCCESS:return Object(h.a)(Object(h.a)({},e),{},{isCheckoutCompleted:!1,isCheckoutPending:!1});default:return e}}},R=Object(p.b)(w),k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25}):p.c,P=[Object(p.a)(O.a)],U=Object(p.d)(R,k.apply(void 0,P)),H=function(e){return e.data.products},D=function(e){return e.data.isCheckoutPending},G=t(215),I=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=n?G.isEqual:function(){return!0};return Object(j.c)(e,t)},K=U,V=t(81),M=t(40),L=t(251),X=[{name:"data-service",endpoint:"http://127.0.0.1:2999/health",maxRetries:10}],$=function(){var e=Object(m.a)(v.a.mark((function e(){var n,t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(X.map((function(e){var n=e.name,t=e.endpoint,r=e.maxRetries;return new Promise((function(e,a){var c=1,i=setInterval((function(){L(t,(function(o,s,d){o||200!==s.statusCode||(e(Object(M.a)({},n,{endpoint:t,running:!0})),clearInterval(i)),c===r&&a(Object(M.a)({},n,{endpoint:t,running:!1})),c++}))}),1e3)}))})));case 2:return n=e.sent,t=Object.values(n).every((function(e){return"fulfilled"===e.status})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.useState)(!1),n=Object(V.a)(e,2),t=n[0],r=n[1];return Object(d.useEffect)((function(){function e(){return(e=Object(m.a)(v.a.mark((function e(){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:n=e.sent,r(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),t},J=t(3),q=t(4),z=q.b.div(o||(o=Object(J.a)(["\n    position: relative;\n    display: flex;\n    padding: 16px;\n    background-color: #6b5b95;\n"]))),A=q.b.div(s||(s=Object(J.a)(["\n    margin: auto;\n    color: white;\n"]))),F=t(1),Q=function(e){var n=e.title;return Object(F.jsx)(z,{className:"header",children:Object(F.jsx)(A,{className:"title",children:n})})};Q.displayName="Header",Q.defaultProps={};var W,Y,Z,ee=Q,ne=q.b.div(W||(W=Object(J.a)(["\n    display: flex;\n"]))),te=q.b.button(Y||(Y=Object(J.a)(["\n    border: none;\n    height: 32px;\n    width: 32px;\n    border-radius: 8px;\n    :hover,\n    :active {\n        background-color: rgba(0, 0, 0, 0.15);\n    }\n"]))),re=q.b.div(Z||(Z=Object(J.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    margin: 0 4px;\n"]))),ae=function(e){var n=e.value,t=e.onChange,r=function(e){return function(){t({add:n+1,remove:n-1}[e])}};return Object(F.jsxs)(ne,{children:[Object(F.jsx)(te,{onClick:r("remove"),children:"-"}),Object(F.jsx)(re,{children:n}),Object(F.jsx)(te,{onClick:r("add"),children:"+"})]})};ae.displayName="Counter",ae.defaultProps={};var ce,ie,oe=ae,se=t(219),de=t.n(se),ue=q.b.div(ce||(ce=Object(J.a)(["\n    height: 100%;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    .react-spinner-material {\n        margin: auto;\n    }\n"]))),le=q.b.div(ie||(ie=Object(J.a)(["\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    display: flex;\n    justify-content: center;\n    top: calc(50% + 40px);\n"]))),be=function(e){var n=e.color,t=e.message;return Object(F.jsxs)(ue,{className:"loader",children:[Object(F.jsx)(de.a,{radius:40,color:n,stroke:5,visible:!0}),t&&Object(F.jsx)(le,{children:t})]})};be.displayName="Loader",be.defaultProps={color:"orange"};var je,pe,Oe,he,fe,xe,ve,me,ge=be,Ce=q.b.div(je||(je=Object(J.a)(["\n    position: relative;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n"]))),Ee=q.b.div(pe||(pe=Object(J.a)(["\n    position: relative;\n    height: 100%;\n    overflow-y: auto;\n"]))),ye=q.b.div(Oe||(Oe=Object(J.a)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n"]))),Se=q.b.div(he||(he=Object(J.a)(["\n    display: flex;\n    justify-content: space-between;\n    padding: 16px;\n"]))),_e=q.b.button(fe||(fe=Object(J.a)(["\n    position: relative;\n    background-color: #ff7b25;\n    color: white;\n    height: 0;\n    bottom: -8px;\n    border: none;\n    ",";\n"])),(function(e){var n=e.show;return Object(q.a)(xe||(xe=Object(J.a)(["\n            ","\n            transition: height .3s ease-in-out, transform .3s ease-in-out;\n        "])),n&&Object(q.a)(ve||(ve=Object(J.a)(["\n                height: 56px;\n                bottom: 0px;\n            "]))))})),Ne=q.b.div(me||(me=Object(J.a)(["\n    font-weight: 600;\n"]))),Te=Object(d.memo)((function(e){var n=e.orderStatus,t=Object(j.b)(),r=i.data.checkout,a=I(c.data.isCheckoutPending),o=Object(d.useMemo)((function(){return n?Object.values(n).reduce((function(e,n){return e+n.itemValue}),0):0}),[n]);return Object(F.jsxs)(ye,{className:"checkout",children:[Object(F.jsxs)(Se,{className:"total-section",children:[Object(F.jsx)(Ne,{children:"Total"}),Object(F.jsxs)(Ne,{children:["$",o,".00"]})]}),Object(F.jsx)(_e,{className:"great-big-button",show:!!o,onClick:function(){t(r(n))},children:a?Object(F.jsx)(ge,{color:"white",message:"loading products..."}):"Checkout"})]})}));Te.displayName="Checkout",Te.defaultProps={};var we,Re,ke,Pe,Ue,He,De=Te,Ge=q.b.div(we||(we=Object(J.a)(["\n    position: relative;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n"]))),Ie=q.b.table(Re||(Re=Object(J.a)(["\n    margin-top: 8px;\n    position: relative;\n    width: 100%;\n"]))),Ke=q.b.thead(ke||(ke=Object(J.a)(["\n    font-weight: 600;\n    height: 32px;\n    padding: 0 8px;\n    display: flex;\n    border-bottom: solid 1px lightgrey;\n"]))),Ve=q.b.tr(Pe||(Pe=Object(J.a)(["\n    display: flex;\n    padding: 16px 0;\n    border-radius: 6px;\n    margin: 4px;\n    ","\n"])),(function(e){return e.isHighlighted&&Object(q.a)(Ue||(Ue=Object(J.a)(["\n                background-color: rgba(254, 178, 54, 0.5);\n                transition: background-color 0.3s ease;\n            "])))})),Me=q.b.td(He||(He=Object(J.a)(["\n    padding: 0 4px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    &.counter {\n        width: 25%;\n    }\n    &.item-label {\n        width: 65%;\n    }\n    &.price {\n        width: 10%;\n        padding: 0;\n    }\n"]))),Le=function(e){var n=e.products,t=e.orderStatus,r=e.addToOrder;return Object(F.jsx)(Ge,{className:"basket",children:Object.keys(n).map((function(e,a){var c=n[e],i=c.items,o=c.label;return Object(F.jsxs)(Ie,{children:[Object(F.jsx)(Ke,{children:Object(F.jsx)("tr",{children:Object(F.jsx)("td",{colSpan:3,children:o})})}),Object(F.jsx)("tbody",{className:"category",children:i.map((function(e,n){var a=e.name,c=e.id,i=e.price,o=t[c]||{},s=o.countValue,d=void 0===s?0:s,u=o.itemValue,l=void 0===u?0:u;return Object(F.jsxs)(Ve,{className:"order-row",isHighlighted:d,children:[Object(F.jsx)(Me,{className:"label counter",children:Object(F.jsx)(oe,{value:d,onChange:function(e){return r(Object(M.a)({},c,{countValue:Math.max(0,e),itemValue:i*Math.max(0,e)}))}})}),Object(F.jsx)(Me,{className:"label item-label",children:Object(F.jsx)("div",{children:a})}),Object(F.jsx)(Me,{className:"label price",children:Object(F.jsxs)("div",{children:["$",l]})})]},n)}))})]},a)}))})};Le.displayName="Basket";var Xe=Le,$e=function(e){var n=e.products,t=Object(d.useReducer)((function(e,n){if(n)return Object(h.a)(Object(h.a)({},e),n)}),{}),r=Object(V.a)(t,2),a=r[0],c=r[1];return Object(F.jsxs)(Ce,{className:"order",children:[Object(F.jsx)(ee,{title:"Order"}),Object(F.jsx)(Ee,{className:"scroll-container",children:Object(F.jsx)(Xe,{products:n,orderStatus:a,addToOrder:c})}),Object(F.jsx)(De,{orderStatus:a})]})};$e.displayName="Order";var Be,Je,qe,ze,Ae,Fe,Qe,We,Ye=$e,Ze=t(482),en=t(480),nn=t(481),tn=q.b.div(Be||(Be=Object(J.a)(["\n    position: relative;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    border-right: solid 1px grey;\n"]))),rn=q.b.div(Je||(Je=Object(J.a)(["\n    position: relative;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    overflow: auto;\n"]))),an=q.b.thead(qe||(qe=Object(J.a)(["\n    font-weight: 600;\n"]))),cn=q.b.div(ze||(ze=Object(J.a)(["\n    cursor: pointer;\n    display: flex;\n    flex-direction: column;\n    box-sizing: border-box;\n    width: 100%;\n    border-radius: 6px;\n    padding: 8px;\n    :hover {\n        background-color: rgba(0, 0, 0, 0.05);\n    }\n"]))),on=q.b.img(Ae||(Ae=Object(J.a)(["\n    width: inherit;\n    margin: auto;\n    border-radius: 6px;\n"]))),sn=Object(q.b)(en.a)(Fe||(Fe=Object(J.a)(["\n    flex-grow: 0;\n    margin: 24px 0;\n    display: flex;\n    justify-content: flex-start;\n"]))),dn=Object(q.b)(nn.a)(Qe||(Qe=Object(J.a)([""]))),un=q.b.div(We||(We=Object(J.a)(["\n    text-align: center;\n"]))),ln=function(e){var n=e.products,t={xs:6,md:4,lg:3};return Object(F.jsxs)(tn,{className:"products",children:[Object(F.jsx)(ee,{title:"Products"}),Object(F.jsx)(rn,{className:"product-grid",children:Object.keys(n).map((function(e,r){var a=n[e],c=a.items,i=a.label;return Object(F.jsxs)(Ze.a,{children:[Object(F.jsx)(an,{className:"category",children:i}),Object(F.jsx)(dn,{children:c.map((function(e,n){var r=e.name,a=e.price,c=e.imageUrl;return Object(F.jsx)(sn,Object(h.a)(Object(h.a)({},t),{},{children:Object(F.jsxs)(cn,{children:[Object(F.jsx)(on,{alt:r,src:c}),Object(F.jsx)(un,{children:r}),Object(F.jsxs)(un,{className:"price",children:["$",a]})]})}),n)}))})]},r)}))})]})};ln.displayName="Products";var bn,jn,pn,On=ln,hn=q.b.div(bn||(bn=Object(J.a)(["\n    display: flex;\n    height: 100%;\n    overflow: auto;\n"]))),fn=Object(q.b)(en.a)(jn||(jn=Object(J.a)(["\n    padding: 0%;\n    overflow: hidden;\n    height: 100%;\n"]))),xn=Object(q.b)(nn.a)(pn||(pn=Object(J.a)(["\n    border: solid 1px grey;\n    height: 100%;\n"]))),vn=function(){var e=Object(j.b)(),n=i.data.getProducts,t=I(c.data.products);return Object(d.useEffect)((function(){e(n())}),[t]),t?Object(F.jsx)(hn,{children:Object(F.jsx)(Ze.a,{children:Object(F.jsxs)(xn,{children:[Object(F.jsx)(fn,{md:12,lg:8,children:Object(F.jsx)(On,{products:t})}),Object(F.jsx)(fn,{md:12,lg:4,children:Object(F.jsx)(Ye,{products:t})})]})})}):Object(F.jsx)(ge,{message:"loading products..."})};vn.displayName="Shop",vn.defaultProps={};var mn=vn;var gn=function(){var e=B();return Object(F.jsx)("div",{id:"app",children:e?Object(F.jsx)(mn,{}):Object(F.jsx)(ge,{color:"#6b5b95",message:"checking services..."})})};b.a.render(Object(F.jsx)(u.a.StrictMode,{children:Object(F.jsx)(j.a,{store:K,children:Object(F.jsx)(gn,{})})}),document.getElementById("root"))},67:function(e,n,t){var r=t(250),a={headers:{"Content-Type":"application/json"},method:"GET",errorHandler:r.errorHandler,responseHandler:r.responseHandler};e.exports=a}},[[479,1,2]]]);
//# sourceMappingURL=main.d15de890.chunk.js.map