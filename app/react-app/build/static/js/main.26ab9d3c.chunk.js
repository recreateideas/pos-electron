(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{220:function(e,n,t){},249:function(e,n){e.exports={errorHandler:function(e){return{status:e.response?e.response.status:e.status,data:e.response?e.response.data:e.data}},responseHandler:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{status:e.status,data:e.data}}}},267:function(e,n){},269:function(e,n){},279:function(e,n){},281:function(e,n){},306:function(e,n){},308:function(e,n){},309:function(e,n){},314:function(e,n){},316:function(e,n){},322:function(e,n){},324:function(e,n){},343:function(e,n){},355:function(e,n){},358:function(e,n){},384:function(e,n){},477:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"getProducts",(function(){return D}));var a={};t.r(a),t.d(a,"products",(function(){return M}));var c={};t.r(c),t.d(c,"data",(function(){return a}));var i={};t.r(i),t.d(i,"data",(function(){return r}));t(219),t(220);var o,s,d,u,l,j,p,b,O=t(0),h=t.n(O),f=t(80),v=t.n(f),x=t(50),m=t(68),g=t(213),E=t(30),S={data:{}},_=t(22),y=t.n(_),w=t(36),T=t(214),C=t.n(T),R=t(67),P=t.n(R),N=function(){var e=Object(w.a)(y.a.mark((function e(n){var t,r,a,c,i,o,s,d,u,l,j,p;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.url,r=n.data,a=n.method,c=void 0===a?P.a.method:a,i=n.headers,o=void 0===i?P.a.headers:i,s=n.errorHandler,d=void 0===s?P.a.errorHandler:s,u=n.responseHandler,l=void 0===u?P.a.responseHandler:u,j={method:c,headers:o,data:r},e.prev=2,e.next=5,C()(t,j);case 5:return p=e.sent,e.abrupt("return",l(p));case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",d(e.t0));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),U={SET_USER:"SET_USER",GET_PRODUCTS_PENDING:"GET_PRODUCTS_PENDING",GET_PRODUCTS_ERROR:"GET_PRODUCTS_ERROR",GET_PRODUCTS_SUCCESS:"GET_PRODUCTS_SUCCESS"},D=function(){return function(){var e=Object(w.a)(y.a.mark((function e(n,t){var r,a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t(),a=r.data.products,n({type:U.GET_PRODUCTS_PENDING}),c={url:"http://localhost:2999/products",errorHandler:function(e){n({type:U.GET_PRODUCTS_ERROR,data:{message:e.message}})},responseHandler:function(e){var t;n({type:U.GET_PRODUCTS_SUCCESS,data:{products:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.products}})}},a){e.next=6;break}return e.next=6,N(c);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},k={data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S.data,n=arguments.length>1?arguments[1]:void 0,t=n.type,r=n.data;switch(t){case U.GET_PRODUCTS_SUCCESS:return Object(E.a)(Object(E.a)({},e),{},{products:r.products});default:return e}}},G=Object(m.b)(k),H=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25}):m.c,I=[Object(m.a)(g.a)],V=Object(m.d)(G,H.apply(void 0,I)),M=function(e){return e.data.products},X=t(215),L=V,J=t(81),$=t(40),q=t(250),z=[{name:"data-service",endpoint:"http://127.0.0.1:2999/health",maxRetries:10}],B=function(){var e=Object(w.a)(y.a.mark((function e(){var n,t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(z.map((function(e){var n=e.name,t=e.endpoint,r=e.maxRetries;return new Promise((function(e,a){var c=1,i=setInterval((function(){q(t,(function(o,s,d){o||200!==s.statusCode||(e(Object($.a)({},n,{endpoint:t,running:!0})),clearInterval(i)),c===r&&a(Object($.a)({},n,{endpoint:t,running:!1})),c++}))}),1e3)}))})));case 2:return n=e.sent,t=Object.values(n).every((function(e){return"fulfilled"===e.status})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(O.useState)(!1),n=Object(J.a)(e,2),t=n[0],r=n[1];return Object(O.useEffect)((function(){function e(){return(e=Object(w.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:n=e.sent,r(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),t},F=t(8),K=t(9),Q=K.a.div(o||(o=Object(F.a)(["\n    height: 100%;\n"]))),W=K.a.thead(s||(s=Object(F.a)(["\n    font-weight: 600;\n"]))),Y=K.a.tr(d||(d=Object(F.a)(["\n    display: flex;\n    padding: 16px 0;\n"]))),Z=K.a.tr(u||(u=Object(F.a)(["\n    padding: 0 4px;\n    &.counter {\n        width: 25%;\n    }\n    &.item-label {\n        width: 65%;\n    }\n    &.price {\n        width: 10%;\n    }\n"]))),ee=K.a.table(l||(l=Object(F.a)(["\n    width: 100%;\n    height: 100%;\n"]))),ne=K.a.div(j||(j=Object(F.a)(["\n    height: 100%;\n    overflow-y: auto;\n"]))),te=K.a.div(p||(p=Object(F.a)(["\n    display: flex;\n    padding: 16px;\n    background-color: #6b5b95;\n"]))),re=K.a.div(b||(b=Object(F.a)(["\n    margin: auto;\n    color: white;\n"]))),ae=t(1),ce=function(e){var n=e.title;return Object(ae.jsx)(te,{children:Object(ae.jsx)(re,{children:n})})};ce.displayName="Header",ce.defaultProps={};var ie,oe,se,de=ce,ue=K.a.div(ie||(ie=Object(F.a)(["\n    display: flex;\n"]))),le=K.a.button(oe||(oe=Object(F.a)(["\n    border: none;\n    height: 32px;\n    width: 32px;\n    border-radius: 8px;\n    :hover,\n    :active {\n        background-color: rgba(0, 0, 0, 0.15);\n    }\n"]))),je=K.a.div(se||(se=Object(F.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    margin: 0 4px;\n"]))),pe=function(e){var n=e.value,t=e.onChange,r=function(e){return function(){t({add:n+1,remove:n-1}[e])}};return Object(ae.jsxs)(ue,{children:[Object(ae.jsx)(le,{onClick:r("remove"),children:"-"}),Object(ae.jsx)(je,{children:n}),Object(ae.jsx)(le,{onClick:r("add"),children:"+"})]})};pe.displayName="Counter",pe.defaultProps={};var be=pe,Oe=function(e){var n=e.products,t=Object(O.useReducer)((function(e,n){if(n)return Object(E.a)(Object(E.a)({},e),n)}),{}),r=Object(J.a)(t,2),a=r[0],c=r[1];return console.log(a),Object(ae.jsxs)(Q,{children:[Object(ae.jsx)(de,{title:"Order"}),Object(ae.jsx)(ne,{children:Object.keys(n).map((function(e,t){var r=n[e],i=r.items,o=r.label;return Object(ae.jsxs)(ee,{children:[Object(ae.jsx)(W,{children:o}),Object(ae.jsx)("tbody",{className:"category",children:i.map((function(e,n){var t=e.name,r=e.id,i=e.price,o=a[r]||{},s=o.countValue,d=void 0===s?0:s,u=o.itemValue,l=void 0===u?0:u;return Object(ae.jsxs)(Y,{className:"order-row",children:[Object(ae.jsx)(Z,{className:"counter",children:Object(ae.jsx)(be,{value:d,onChange:function(e){return c(Object($.a)({},r,{countValue:Math.max(0,e),itemValue:i*Math.max(0,e)}))}})}),Object(ae.jsx)(Z,{className:"item-label",children:Object(ae.jsx)("div",{children:t})}),Object(ae.jsx)(Z,{className:"price",children:Object(ae.jsxs)("div",{className:"price",children:["$",l]})})]},n)}))})]},t)}))})]})};Oe.displayName="Order";var he,fe,ve,xe,me,ge,Ee,Se=Oe,_e=t(480),ye=t(478),we=t(479),Te=K.a.div(he||(he=Object(F.a)(["\n    height: 100%;\n    border-right: solid 1px grey;\n"]))),Ce=K.a.div(fe||(fe=Object(F.a)([""]))),Re=K.a.div(ve||(ve=Object(F.a)(["\n    cursor: pointer;\n    display: flex;\n    flex-direction: column;\n    box-sizing: border-box;\n    width: 100%;\n    border-radius: 6px;\n    padding: 8px;\n    :hover {\n        background-color: rgba(0, 0, 0, 0.05);\n    }\n"]))),Pe=K.a.img(xe||(xe=Object(F.a)(["\n    height: 9rem;\n    width: 9rem;\n    margin: auto;\n    border-radius: 6px;\n"]))),Ne=Object(K.a)(ye.a)(me||(me=Object(F.a)(["\n    flex-grow: 0;\n    margin: 24px 0;\n    display: flex;\n    justify-content: flex-start;\n"]))),Ue=Object(K.a)(we.a)(ge||(ge=Object(F.a)([""]))),De=K.a.div(Ee||(Ee=Object(F.a)(["\n    text-align: center;\n"]))),ke=function(e){var n=e.products,t={xs:6,md:4,lg:3};return Object(ae.jsxs)(Te,{children:[Object(ae.jsx)(de,{title:"Products"}),Object.keys(n).map((function(e,r){var a=n[e].items;return Object(ae.jsx)(_e.a,{children:Object(ae.jsx)(Ce,{children:Object(ae.jsx)(Ue,{children:a.map((function(e,n){var r=e.name,a=e.price,c=e.imageUrl;return Object(ae.jsx)(Ne,Object(E.a)(Object(E.a)({},t),{},{children:Object(ae.jsxs)(Re,{children:[Object(ae.jsx)(Pe,{alt:r,src:c}),Object(ae.jsx)(De,{children:r}),Object(ae.jsxs)(De,{className:"price",children:["$",a]})]})}),n)}))})})},r)}))]})};ke.displayName="Products";var Ge,He,Ie,Ve=ke,Me=K.a.div(Ge||(Ge=Object(F.a)(["\n    display: flex;\n    height: 100%;\n"]))),Xe=Object(K.a)(ye.a)(He||(He=Object(F.a)(["\n    padding: 0%;\n    overflow: hidden;\n    height: 100%;\n"]))),Le=Object(K.a)(we.a)(Ie||(Ie=Object(F.a)(["\n    border: solid 1px grey;\n    height: 100%;\n"]))),Je=function(){var e=Object(x.b)(),n=i.data.getProducts,t=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?function(){return!0}:X.isEqual;return Object(x.c)(e,n)}(c.data.products);return Object(O.useEffect)((function(){e(n())}),[t]),t?Object(ae.jsx)(Me,{children:Object(ae.jsx)(_e.a,{children:Object(ae.jsxs)(Le,{children:[Object(ae.jsx)(Xe,{md:12,lg:8,children:Object(ae.jsx)(Ve,{products:t})}),Object(ae.jsx)(Xe,{md:12,lg:4,children:Object(ae.jsx)(Se,{products:t})})]})})}):Object(ae.jsx)("div",{children:"loading products..."})};Je.displayName="Shop",Je.defaultProps={};var $e=Je;var qe=function(){var e=A();return Object(ae.jsx)("div",{id:"app",children:e?Object(ae.jsx)($e,{}):"checking apps health..."})};v.a.render(Object(ae.jsx)(h.a.StrictMode,{children:Object(ae.jsx)(x.a,{store:L,children:Object(ae.jsx)(qe,{})})}),document.getElementById("root"))},67:function(e,n,t){var r=t(249),a={headers:{"Content-Type":"application/json"},method:"GET",errorHandler:r.errorHandler,responseHandler:r.responseHandler};e.exports=a}},[[477,1,2]]]);
//# sourceMappingURL=main.26ab9d3c.chunk.js.map